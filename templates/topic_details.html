{% extends "base.html" %}

{% block title %}Topic Details{% endblock title %}

{% block content %}

<!-- DETALLES -->
<div class="container-fluid">
    <div class="col-sm-6 col-md-6 col-md-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">Topic details
                      <div class="pull-right">
            {% if not is_subscribed %}
              <a href="/topic/{{ topic.key.id() }}/subscribe" class="btn btn-info btn-xs">Subscribe</a>
            {% endif %}
            {% if can_delete %}
              <a href="/topic/{{ topic.key.id() }}/delete" class="btn btn-danger btn-xs">Delete</a>
            {% endif %}
          </div>
            </div>
                <div class="topiclist">
                    <b>ID:</b> <p>{{ topic.key.id() }}</p>
                    <b>Title:</b> <p>{{ topic.title }}</p>
                    <b>Email:</b> <p>{{ topic.author_email }}</p>
                    <b>Content:</b> <p>{{ topic.content }}</p>
                    <b>Date:</b> <p>{{ topic.created.strftime('%d/%m/%Y at %H:%M') }}</p>
                </div>
        </div>
    </div>
</div>

<!-- FIN DETALLES -->

<!-- LISTADO DE COMENTARIOS -->
<div class="container-fluid">
    <div class="col-sm-6 col-md-6 col-md-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">List all the comments</div>
            {% for comment in comments %}
                <div class="topiclist">
                    <p>{{ comment.author_email }}</p>
                    <p>{{ comment.content }}</p>
                    <p>{{ topic.created.strftime('%d/%m/%Y at %H:%M') }}</p>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- FIN LISTADO -->

<!-- COMENTARIOS -->
<div class="container-fluid">
    <div class="col-sm-6 col-md-6 col-md-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">Add comments</div>
            <form action="/topic/{{ topic.key.id() }}/comment" method="post">
                <input type="hidden" name="csrf_token" value="{{csrf_token}}">
                <div class="form-group">
                    <textarea name="text" class="form-control" rows="6" required></textarea>
                </div>
            <button type="submit" class="btn btn-success">Submit</button>
            </form>
            <form action="/topic/{{ topic.key.id() }}/delete" method="post">
                                <input type="hidden" name="csrf_token" value="{{csrf_token}}">
        <button type="submit" class="btn btn-danger">Delete Topic</button>

    </form>
        </div>
    </div>
</div>



<!-- FIN COMENTARIOS -->



{% endblock content %}