{% extends "base.html" %}

{% block title %}Add new topic{% endblock title %}

{% block content %}

<div class="container-fluid">
    <div class="col-sm-6 col-md-6 col-md-offset-3">
        <h1 id="add-topic-heading">Add New Topic</h1>
        <div class="panel panel-default">
            <div class="panel-heading">Title</div>
                <form method="post">
                <input type="hidden" name="csrf_token" value="{{csrf_token}}">
                <div class="form-group">
                    <input type="text" class="form-control" name="title" id="add-topic-title" required>
                </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">Text</div>
                        <div class="form-group">
                            <textarea name="text" class="form-control" rows="6" required></textarea>
                        </div>
                        <div class="panel-heading" id="add-question"></div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="humans" id="add-two-numbers" required>
                        </div>
                        <button type="submit" class="btn btn-success" id="add-topic-button">Submit</button>
                    </div>
                </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
<script>
    $(document).ready(function() {
        var $randomNumber1 = Math.floor((Math.random() * 10) + 1);
        var $randomNumber2 = Math.floor((Math.random() * 10) + 1);
        var $randomNumberSum = $randomNumber1 + $randomNumber2;

        $("#add-question").text("What is the sum of " + $randomNumber1 + " and " + $randomNumber2 + "?");

        var $addTopicButton = $("#add-topic-button");
        var $addTwoNumbers = $("#add-two-numbers");

        $addTopicButton.on('click', function(event) {
            if ($addTwoNumbers.val() === $randomNumberSum.toString()){
            $addTopicButton.addClass('hidden');
            } else {
            event.preventDefault();
            }
        });
    });
</script>
{% endblock scripts %}